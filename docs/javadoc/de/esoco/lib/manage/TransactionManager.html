<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_191) on Mon Oct 29 14:51:35 CET 2018 -->
<title>TransactionManager (esoco-lib 1.3.0 API)</title>
<meta name="date" content="2018-10-29">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TransactionManager (esoco-lib 1.3.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?de/esoco/lib/manage/TransactionManager.html" target="_top">Frames</a></li>
<li><a href="TransactionManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">de.esoco.lib.manage</div>
<h2 title="Class TransactionManager" class="title">Class TransactionManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>de.esoco.lib.manage.TransactionManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">TransactionManager</span>
extends java.lang.Object</pre>
<div class="block">A thread-based transaction manager implementation. New transactions will be
 associated with the current thread and all subsequent invocations of the
 static manager methods will operate on the transaction for the current
 thread. The transaction that is associated with the current thread can be
 queried with the method <a href="../../../../de/esoco/lib/manage/TransactionManager.html#getTransaction--"><code>getTransaction()</code></a>. The static methods in this
 class are only shortcuts to the transaction methods which may be invoked
 alternatively.

 <p>A new transaction for the current thread can be started by invoking the
 method <a href="../../../../de/esoco/lib/manage/TransactionManager.html#begin--"><code>begin()</code></a>. Afterwards, transaction elements which implement the
 interface <a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage"><code>Transactional</code></a> can be added to the thread's transaction by
 means of the method <a href="../../../../de/esoco/lib/manage/TransactionManager.html#addTransactionElement-de.esoco.lib.manage.Transactional-"><code>addTransactionElement(Transactional)</code></a>. To
 complete a transaction it can either be committed (i.e. made persistent) by
 calling the method <a href="../../../../de/esoco/lib/manage/TransactionManager.html#commit--"><code>commit()</code></a> or rolled back (canceled) by using
 <a href="../../../../de/esoco/lib/manage/TransactionManager.html#rollback--"><code>rollback()</code></a>.</p>

 <p>If a call to <a href="../../../../de/esoco/lib/manage/TransactionManager.html#commit--"><code>commit()</code></a> or <a href="../../../../de/esoco/lib/manage/TransactionManager.html#rollback--"><code>rollback()</code></a> fails the respective
 method will throw a <a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage"><code>TransactionException</code></a>. All transaction elements
 after the element that caused the failure will be rolled back before the call
 returns. All elements that had been committed before the failure will remain
 so because currently there's no way to revert the commit. Therefore it is
 recommended to handle modifications in different contexts in different
 transactions to prevent inconsistencies between the context.</p>

 <p>Transactions can be nested. Any subsequent call to the <a href="../../../../de/esoco/lib/manage/TransactionManager.html#begin--"><code>begin()</code></a>
 method will increase the transaction level by 1. The current level can be
 queried with the method <a href="../../../../de/esoco/lib/manage/Transaction.html#getLevel--"><code>Transaction.getLevel()</code></a>. To prevent
 inconsistencies of stored data a commit will only be executed if no more
 nested transactions exist (i.e. the transaction level reaches zero) while a
 rollback will be executed immediately.</p>

 <p>Either way, a thread's transaction will remain available (but inactive
 after the first commit/rollback) until a distinct commit or rollback has been
 executed for each call to the method <a href="../../../../de/esoco/lib/manage/TransactionManager.html#begin--"><code>begin()</code></a>. Any try to invoke a
 method that doesn't match the current state (e.g. trying to begin a new
 transaction on one that has been rolled back) will cause an exception.
 Therefore it is paramount to implement transactional code correctly to avoid
 errors by matching call to begin and commit/rollback. Typical transaction
 code should look like the following on each level that starts a
 transaction:</p>

 <pre>
   TransactionManager.begin();
   try
   {  // add the transaction elements
      Transactional aElement = ...;
      TransactionManager.addTransactionElement(aElement);
      ...
   }
   catch (Exception e)
   {  // rollback on any error, even runtime exceptions
      TransactionManager.rollback();
      // re-throw exceptions (wrap if necessary) to signal the rollback to the
      // invoking code unless this is the top-level error handling code; in the
      // latter case the commit must only be performed if no rollback occurred
      // (e.g. by checking TransactionManager.isInTransaction()
      throw e;
   }
   // commit the successfully created transaction elements
   TransactionManager.commit();

 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#addTransactionElement-de.esoco.lib.manage.Transactional-">addTransactionElement</a></span>(<a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage">Transactional</a>&nbsp;rElement)</code>
<div class="block">Adds a certain transactional element to the current transaction.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../de/esoco/lib/manage/Transaction.html" title="class in de.esoco.lib.manage">Transaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#begin--">begin</a></span>()</code>
<div class="block">Begins a new transaction for the current thread.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../../../de/esoco/lib/manage/Transaction.html" title="class in de.esoco.lib.manage">Transaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#beginUnmanagedTransaction--">beginUnmanagedTransaction</a></span>()</code>
<div class="block">Creates and returns a new transaction that is not managed by the
 transaction manager and therefore isn't bound to a specific thread.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#commit--">commit</a></span>()</code>
<div class="block">Commits the transaction of the current thread by committing all
 transaction elements in the reverse order in which they have been added.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="../../../../de/esoco/lib/manage/Transaction.html" title="class in de.esoco.lib.manage">Transaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#getTransaction--">getTransaction</a></span>()</code>
<div class="block">Returns the transaction instance for the current thread.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#isInTransaction--">isInTransaction</a></span>()</code>
<div class="block">Returns the transaction state of the current thread.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#isTransactionElement-de.esoco.lib.manage.Transactional-">isTransactionElement</a></span>(<a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage">Transactional</a>&nbsp;rElement)</code>
<div class="block">Checks whether a certain transaction element is active in the current
 thread's transaction.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#removeTransactionElement-de.esoco.lib.manage.Transactional-">removeTransactionElement</a></span>(<a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage">Transactional</a>&nbsp;rElement)</code>
<div class="block">Removes a certain element from the current thread's transaction.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#rollback--">rollback</a></span>()</code>
<div class="block">Performs a rollback of the transaction that is active for the current
 thread.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../de/esoco/lib/manage/TransactionManager.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Performs a shutdown of the transaction manager and frees all allocated
 resources.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addTransactionElement-de.esoco.lib.manage.Transactional-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTransactionElement</h4>
<pre>public static&nbsp;void&nbsp;addTransactionElement(<a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage">Transactional</a>&nbsp;rElement)</pre>
<div class="block">Adds a certain transactional element to the current transaction. If the
 element is already part of the transaction it will be ignored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rElement</code> - The element to add</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If there's no active transaction for the
                               current thread</dd>
</dl>
</li>
</ul>
<a name="begin--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>begin</h4>
<pre>public static&nbsp;<a href="../../../../de/esoco/lib/manage/Transaction.html" title="class in de.esoco.lib.manage">Transaction</a>&nbsp;begin()</pre>
<div class="block">Begins a new transaction for the current thread.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the new transaction instance</dd>
</dl>
</li>
</ul>
<a name="beginUnmanagedTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginUnmanagedTransaction</h4>
<pre>public static&nbsp;<a href="../../../../de/esoco/lib/manage/Transaction.html" title="class in de.esoco.lib.manage">Transaction</a>&nbsp;beginUnmanagedTransaction()</pre>
<div class="block">Creates and returns a new transaction that is not managed by the
 transaction manager and therefore isn't bound to a specific thread. This
 method can be used in special cases where applications need to handle
 separate transactions, e.g. to coordinate separate threads by themselves.
 Because transactions implement the <a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage"><code>Transactional</code></a> interface they
 can be added to other transactions to perform the final commit or
 rollback.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The new unmanaged transaction instance</dd>
</dl>
</li>
</ul>
<a name="commit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public static&nbsp;void&nbsp;commit()
                   throws <a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage">TransactionException</a></pre>
<div class="block">Commits the transaction of the current thread by committing all
 transaction elements in the reverse order in which they have been added.
 If an element fails to commit a <a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage"><code>TransactionException</code></a> will be
 thrown which contains a reference to the element that failed. The
 thread's transaction will then remain in a partially committed state and
 the application code should invoke either rollback() or commit() to
 finish the remaining transaction elements.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If there's no active transaction for the
                               current thread</dd>
<dd><code><a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage">TransactionException</a></code> - If committing a transaction element fails</dd>
</dl>
</li>
</ul>
<a name="getTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransaction</h4>
<pre>public static&nbsp;<a href="../../../../de/esoco/lib/manage/Transaction.html" title="class in de.esoco.lib.manage">Transaction</a>&nbsp;getTransaction()</pre>
<div class="block">Returns the transaction instance for the current thread. Throws an
 exception if there isn't a transaction active for the invoking thread.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The current thread's transaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If there is no active transaction for the
                               current thread</dd>
</dl>
</li>
</ul>
<a name="isInTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInTransaction</h4>
<pre>public static&nbsp;boolean&nbsp;isInTransaction()</pre>
<div class="block">Returns the transaction state of the current thread.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TRUE if there's an active transaction for the current thread</dd>
</dl>
</li>
</ul>
<a name="isTransactionElement-de.esoco.lib.manage.Transactional-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransactionElement</h4>
<pre>public static&nbsp;boolean&nbsp;isTransactionElement(<a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage">Transactional</a>&nbsp;rElement)</pre>
<div class="block">Checks whether a certain transaction element is active in the current
 thread's transaction. An element is active if it is part of this
 transaction and is not yet committed or rolled back.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rElement</code> - The element to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>TRUE if the given element is active in the current thread's
         transaction, FALSE if not or if there's no active transaction for
         the current thread</dd>
</dl>
</li>
</ul>
<a name="removeTransactionElement-de.esoco.lib.manage.Transactional-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeTransactionElement</h4>
<pre>public static&nbsp;void&nbsp;removeTransactionElement(<a href="../../../../de/esoco/lib/manage/Transactional.html" title="interface in de.esoco.lib.manage">Transactional</a>&nbsp;rElement)</pre>
<div class="block">Removes a certain element from the current thread's transaction. If the
 element isn't currently part of the transaction the method call won't
 have any effect. The given element will neither be committed nor rolled
 back by this method. It is the responsibility of the calling context to
 handle the removed element as necessary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rElement</code> - The element to remove from the thread's current
                  transaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If there's no active transaction for the
                               current thread</dd>
</dl>
</li>
</ul>
<a name="rollback--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre>public static&nbsp;void&nbsp;rollback()
                     throws <a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage">TransactionException</a></pre>
<div class="block">Performs a rollback of the transaction that is active for the current
 thread.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If there's no active transaction for the
                               current thread</dd>
<dd><code><a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage">TransactionException</a></code> - If the rollback of a transaction element
                               fails</dd>
</dl>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public static&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Performs a shutdown of the transaction manager and frees all allocated
 resources.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../de/esoco/lib/manage/TransactionException.html" title="class in de.esoco.lib.manage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?de/esoco/lib/manage/TransactionManager.html" target="_top">Frames</a></li>
<li><a href="TransactionManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
